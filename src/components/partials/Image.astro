---
import {Picture} from 'astro:assets';

const {
    src = '',
    width = null,
    height = null,
    sizes = [],
    alt = '',
    loading = 'eager',
    className = ''
} = Astro.props;

let theSizes = '';
let theWidths = [];

for (const size of sizes){

    theWidths.push((size.imageWidth));
    theWidths.push((size.imageWidth)*2);
    theWidths.push((size.imageWidth)*3);

    theSizes += `(min-width: ${size.viewportWidth}px) ${size.imageWidth}px,`;

}

theSizes = theSizes.slice(0, -1);
---
<Picture
        src={src}
        width={width}
        height={height}
        widths={theWidths}
        sizes={theSizes}
        alt={alt}
        loading={loading}
        formats={['avif', 'webp']}
        fallbackFormat="jpg"
/>